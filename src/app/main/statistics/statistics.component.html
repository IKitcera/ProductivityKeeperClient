<!--      SPINNER-->
<div class="spinner-wrap task-spinner stat-spinner" *ngIf="isLoading" fxLayoutAlign="center center">
  <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
</div>
<!--     CONTENT-->
<div *ngIf="statistic && !isLoading" class="container">
  <div fxLayoutAlign="center center">
    <h2>Statistics</h2>
  </div>
  <div fxLayout="row" fxLayoutAlign="space-evenly">
    <div fxLayout="row" fxLayoutAlign="center center">
      <p>Count of done today:{{'\t'}}</p>
      <p class="pl-10">{{statistic.countOfDoneToday}}</p>
    </div>
    <div fxLayout="row" fxLayoutAlign="center center">
      <p>Count of done total:{{'\t'}}</p>
      <p class="pl-10">{{statistic.countOfDoneTotal}}</p>
    </div>
  </div>

  <div fxLayout="row" fxLayoutAlign="space-evenly">
    <div fxLayout="row" fxLayoutAlign="center center">
      <p>Percent of done today: </p>
      <p class="pl-10">{{statistic.percentOfDoneToday | percent}} </p>
    </div>
    <div fxLayout="row" fxLayoutAlign="center center">
      <p>Percent of done total: </p>
      <p class="pl-10">{{statistic.percentOfDoneTotal| percent}} </p>
    </div>
  </div>

  <div fxLayout="row" fxLayoutAlign="space-evenly">
    <div fxLayout="row" fxLayoutAlign="center center">
      <p>Expired total: </p>
      <p class="pl-10">{{statistic.countOfExpiredTotal}}</p>
    </div>
  </div>
  <div>
    <div fxLayout="row" fxLayoutAlign="end center" >
      <button mat-icon-button [disabled]="selectedChart === SelectedChart.Gauge" (click)="selectedChart = SelectedChart.Gauge; refresh()">
        <mat-icon>incomplete_circle</mat-icon>
      </button>
      <button mat-icon-button [disabled]="selectedChart === SelectedChart.Line" (click)="selectedChart = SelectedChart.Line;">
        <mat-icon>timeline</mat-icon>
      </button>
      <button mat-icon-button [disabled]="selectedChart === SelectedChart.Donut" (click)="selectedChart = SelectedChart.Donut;">
        <mat-icon>donut_large</mat-icon>
      </button>
    </div>
  <div class="chartWrap" [ngSwitch]="selectedChart">

    <ngx-charts-gauge *ngSwitchCase="SelectedChart.Gauge"
      #gChart
      [results]="single"
      [legend]="legend"
      [legendTitle]="'Percents of done per '"
      [legendPosition]="legendPosition"
      [scheme]="'neons'"
      [bigSegments]="10"
      [smallSegments]="0"
      [startAngle]="0"
      [angleSpan]="360"
      [margin]="[40,0,30,0]"
      (select)="onSelect($event)"
      (activate)="onActivate($event)"
      (deactivate)="onDeactivate($event)"
    >
    </ngx-charts-gauge>

    <ngx-charts-line-chart *ngSwitchCase="SelectedChart.Line"
      #lChart
      [legend]="legend"
      [legendPosition]="legendPosition"
      [showXAxisLabel]="false"
      [showYAxisLabel]="true"
      [xAxis]="true"
      [yAxis]="true"
      [xAxisLabel]="'Days'"
      [yAxisLabel]="'Count of done tasks'"
      [timeline]="true"
      [results]="multi"
      [legendTitle]="''"
    >
    </ngx-charts-line-chart>

    <ngx-charts-advanced-pie-chart *ngSwitchCase="SelectedChart.Donut"
      #pChart
      [label]="'Tasks in active category'"
      [scheme]="'cool'"
      [customColors]="getCustomColors()"
      [results]="donutChartData"
      [gradient]="false"
    >
    </ngx-charts-advanced-pie-chart>
  </div>
  </div>
</div>
